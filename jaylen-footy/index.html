<html>
<head>
  <title></title>
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <style>
  body(
	background-color:black;
  )

  </style>
</head>
<body>
  <canvas id="mycanvas" width="1000" height="600" style="border: 2px solid black; position: absolute; left: 10; top: 10;"></canvas>
  <canvas id="canvasScore" width="0" height="0" style="position: absolute; left: 400; top: 700;"></canvas>	
  <script>
    window.addEventListener("load",function() {
	
	
			var score = 0;
		var canvasScore = document.getElementById("canvasScore");
		var contextScore = canvasScore.getContext('2d');
		canvasScore.width = window.innerWidth;
		canvasScore.height = window.innerHeight;
		contextScore.font = "bold 40px Comic Sans MS";
		contextScore.fillStyle = 'red';
		contextScore.strokeStyle = 'black';
		contextScore.fillText(score, 0, 25);
		contextScore.strokeText(score, 0, 25);
      
      //constants
      var GAME_WIDTH = 1000;
      var GAME_HEIGHT = 600;

      //keep the game going
      var gameLive = true;

      //enemies
      var enemies = [
        {
          x: 200, //x coordinate
          y: 225, //y coordinate
          speedY: 2, //speed in Y
          w: 60, //width
          h: 110 //heght
        },
        {
          x: 400,
          y: 225,
          speedY: 3,
          w: 60,
          h: 110
        },
        {
          x: 575,
          y: 225,
          speedY: 4,
          w: 60,
          h: 110
        },
        {
          x: 725,
          y: 225,
          speedY: 5,
          w: 60,
          h: 110
        }
      ];

      //the player object
      var player = {
        x: 10,
        y: 225,
        speedX: 2.5,
        isMoving: false,  //keep track whether the player is moving or not
        w: 60,
        h: 110
      };

      //the goal object
      var goal = {
        x: 850,
        y: 180,
        w: 110,
        h: 250
      }

      var sprites = {};

      var movePlayer = function() {
        player.isMoving = true;
      }

      var stopPlayer = function() {
        player.isMoving = false;
      }
      
      //grab the canvas and context
      var canvas = document.getElementById("mycanvas");
      var ctx = canvas.getContext("2d");

      //event listeners to move player
      canvas.addEventListener('mousedown', movePlayer);
      canvas.addEventListener('mouseup', stopPlayer);   
      canvas.addEventListener('touchstart', movePlayer);
      canvas.addEventListener('touchend', stopPlayer);   

      var load = function() {
        sprites.player = new Image();
        sprites.player.src = 'jaylen.png';

        sprites.background = new Image();
        sprites.background.src = 'grass.jpg';

        sprites.enemy = new Image();
        sprites.enemy.src = 'dad.png';

        sprites.goal = new Image();
        sprites.goal.src = 'goal.png';
      };

      //update the logic
      var update = function() {

        //check if you've won the game
        if(checkCollision(player, goal)) {
          //stop the game
            //gameLive = false;

            score++;
			contextScore.clearRect(0, 0, canvasScore.width, canvasScore.height);
			contextScore.fillText(score, 0, 50);
		contextScore.strokeText(score, 0, 50);
			player.x=10;

            //reload page
            //window.location = "";
        }

        //update player
        if(player.isMoving) {
          player.x = player.x + player.speedX;
        }

        //update enemies
        var i = 0;
        var n = enemies.length;
        
        enemies.forEach(function(element, index){

          //check for collision with player
          if(checkCollision(player, element)) {
            //stop the game
           // gameLive = false;
player.x=10;
           // alert('Game Over!');

            //reload page
           // window.location = "";
          }

          //move enemy
          element.y += element.speedY;
          
          //check borders
          if(element.y <= 10) {
            element.y = 10;
            //element.speedY = element.speedY * -1;
            element.speedY *= -1;
          }
          else if(element.y >= GAME_HEIGHT - 100) {
            element.y = GAME_HEIGHT - 100;
            element.speedY *= -1;
          }
        });
      };

      //show the game on the screen
      var draw = function() {
        //clear the canvas
        ctx.clearRect(0,0,GAME_WIDTH,GAME_HEIGHT);        

        //draw background
        ctx.drawImage(sprites.background, 0, 0);

        //draw player
        ctx.drawImage(sprites.player, player.x, player.y);

        //draw enemies
        enemies.forEach(function(element, index){
          ctx.drawImage(sprites.enemy, element.x, element.y);
        });

        //draw goal
        ctx.drawImage(sprites.goal, goal.x, goal.y);
      };

      //gets executed multiple times per second
      var step = function() {

        update();
        draw();

        if(gameLive) {
          window.requestAnimationFrame(step); 
        }     
      };

      //check the collision between two rectangles
      var checkCollision = function(rect1, rect2) {

        var closeOnWidth = Math.abs(rect1.x - rect2.x) <= Math.max(rect1.w, rect2.w);
        var closeOnHeight = Math.abs(rect1.y - rect2.y) <= Math.max(rect1.h, rect2.h);
        return closeOnWidth && closeOnHeight;
      }

      //initial kick
      load();
      step();
    });
  </script>
</body>
</html>